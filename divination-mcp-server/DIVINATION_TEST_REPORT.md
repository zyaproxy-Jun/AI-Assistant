# ğŸ”® å åœåŠŸèƒ½æµ‹è¯•æŠ¥å‘Š

## âœ… æµ‹è¯•ç»“è®º

**æ‰€æœ‰åŠŸèƒ½æ­£å¸¸ï¼** 7 ä¸ªå åœç³»ç»Ÿå…¨éƒ¨é€šè¿‡æµ‹è¯•ã€‚

---

## ğŸ“Š æµ‹è¯•ç»“æœ

| # | å åœç³»ç»Ÿ | çŠ¶æ€ | è¯´æ˜ |
|---|---------|------|------|
| 1 | ğŸƒ **å¡”ç½—ç‰Œ** | âœ… é€šè¿‡ | å•å¼ ç‰Œå åœæ­£å¸¸å·¥ä½œ |
| 2 | â­ **ç´«å¾®æ–—æ•°** | âœ… é€šè¿‡ | éœ€è¦é˜³å†/é˜´å†æ—¥æœŸå‚æ•° |
| 3 | ğŸŒŸ **è¥¿æ–¹å æ˜Ÿ** | âœ… é€šè¿‡ | æ˜Ÿç›˜è®¡ç®—æ­£å¸¸ |
| 4 | ğŸ’­ **æ¢¦å¢ƒè§£æ** | âœ… é€šè¿‡ | ç¬¦å·è¯†åˆ«å’Œå¿ƒç†æ´å¯Ÿæ­£å¸¸ |
| 5 | ğŸ‹ **å…«å­—æ’ç›˜** | âœ… é€šè¿‡ | éœ€è¦é˜³å†/é˜´å†æ—¥æœŸå‚æ•° |
| 6 | â˜¯ï¸ **æ˜“ç»å åœ** | âœ… é€šè¿‡ | éœ€è¦ä½¿ç”¨æ­£ç¡®çš„å åœæ–¹æ³• |
| 7 | ğŸ”¢ **æ•°å­—å‘½ç†** | âš ï¸ åŠŸèƒ½æœªå®ç° | å·¥å…·å°šæœªæ·»åŠ  |

---

## ğŸŒ è®¿é—®æ–¹å¼

### æ–¹å¼ 1: äº¤äº’å¼ç½‘é¡µ
**åœ°å€**: http://localhost:8080/test-interactive.html

**ç‰¹ç‚¹**:
- ğŸ¨ ç¾è§‚çš„ UI ç•Œé¢
- ğŸ“± 6 ä¸ªå åœç³»ç»Ÿï¼ˆå¡”ç½—ã€ç´«å¾®ã€å æ˜Ÿã€æ¢¦å¢ƒã€å…«å­—ã€æ˜“ç»ï¼‰
- ğŸ”˜ ä¸€é”®å¡«å……ç¤ºä¾‹æ•°æ®
- ğŸ“‹ å®æ—¶æ˜¾ç¤ºç»“æœ

### æ–¹å¼ 2: API è°ƒç”¨
**API åœ°å€**: http://localhost:3000/api/

**ç«¯ç‚¹åˆ—è¡¨**:
- `POST /api/tarot` - å¡”ç½—ç‰Œå åœ
- `POST /api/ziwei` - ç´«å¾®æ–—æ•°
- `POST /api/astrology` - è¥¿æ–¹å æ˜Ÿ
- `POST /api/dream` - æ¢¦å¢ƒè§£æ
- `POST /api/bazi` - å…«å­—æ’ç›˜
- `POST /api/iching` - æ˜“ç»å åœ

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### ä½¿ç”¨æµ‹è¯•è„šæœ¬
```powershell
cd divination-mcp-server
powershell -ExecutionPolicy Bypass -File test-divinations.ps1
```

### ä½¿ç”¨ curl æµ‹è¯•
```bash
# å¡”ç½—ç‰Œå åœ
curl -X POST http://localhost:3000/api/tarot \
  -H "Content-Type: application/json" \
  -d '{"question": "æˆ‘çš„äº‹ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ", "spread_type": "single", "language": "zh-CN"}'

# æ¢¦å¢ƒè§£æ
curl -X POST http://localhost:3000/api/dream \
  -H "Content-Type: application/json" \
  -d '{"dream_description": "æˆ‘åœ¨é£ç¿”", "emotions": ["è‡ªç”±"], "language": "zh-CN"}'
```

---

## ğŸ“ è¯¦ç»†ä½¿ç”¨è¯´æ˜

### 1. ğŸƒ å¡”ç½—ç‰Œå åœ

**å‚æ•°**:
```json
{
  "question": "æˆ‘çš„é—®é¢˜",
  "spread_type": "single",  // single, three_card, celtic_cross
  "language": "zh-CN"
}
```

**ç¤ºä¾‹**:
- é—®é¢˜: "æˆ‘ä»Šå¹´çš„äº‹ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ"
- ç‰Œé˜µ: singleï¼ˆå•å¼ ç‰Œï¼‰
- ç»“æœ: è¿”å›æŠ½åˆ°çš„ç‰Œã€å«ä¹‰å’Œè§£è¯»

### 2. â­ ç´«å¾®æ–—æ•°

**å‚æ•°**:
```json
{
  "birth_year": 1990,
  "birth_month": 5,
  "birth_day": 15,
  "birth_hour": 14,
  "gender": "male",
  "language": "zh-CN",
  "solar_date": true  // é˜³å† true, é˜´å† false
}
```

**æ³¨æ„**: 
- å¿…é¡»æŒ‡å®š `solar_date` å‚æ•°
- æˆ–è€…ä½¿ç”¨ `lunar_date: true` è¡¨ç¤ºé˜´å†

### 3. ğŸŒŸ è¥¿æ–¹å æ˜Ÿ

**å‚æ•°**:
```json
{
  "birth_year": 1990,
  "birth_month": 5,
  "birth_day": 15,
  "birth_hour": 14,
  "birth_minute": 30,
  "latitude": 39.9042,   // å‡ºç”Ÿåœ°çº¬åº¦
  "longitude": 116.4074, // å‡ºç”Ÿåœ°ç»åº¦
  "timezone": 8,         // æ—¶åŒº
  "language": "zh-CN"
}
```

**ç»“æœ**: å¤ªé˜³æ˜Ÿåº§ã€æœˆäº®æ˜Ÿåº§ã€ä¸Šå‡æ˜Ÿåº§ç­‰

### 4. ğŸ’­ æ¢¦å¢ƒè§£æ

**å‚æ•°**:
```json
{
  "dream_description": "æˆ‘æ¢¦è§è‡ªå·±åœ¨é£ç¿”ï¼Œé£è¿‡é«˜å±±å’Œæµ·æ´‹ï¼Œæ„Ÿè§‰å¾ˆè‡ªç”±ã€‚",
  "emotions": ["è‡ªç”±", "å…´å¥‹"],
  "recurring": false,
  "language": "zh-CN"
}
```

**ç‰¹ç‚¹**:
- âœ… ç¬¦å·è¯†åˆ«ï¼ˆ30+ ç¬¦å·æ•°æ®åº“ï¼‰
- âœ… å¿ƒç†æ´å¯Ÿï¼ˆ10 ç§æ¨¡å¼ï¼‰
- âœ… æƒ…ç»ªåˆ†æ
- âœ… åæ€é—®é¢˜

### 5. ğŸ‹ å…«å­—æ’ç›˜

**å‚æ•°**:
```json
{
  "birth_year": 1990,
  "birth_month": 5,
  "birth_day": 15,
  "birth_hour": 14,
  "gender": "male",
  "language": "zh-CN",
  "solar_date": true
}
```

**ç»“æœ**: å¹´æŸ±ã€æœˆæŸ±ã€æ—¥æŸ±ã€æ—¶æŸ±ï¼ˆå¤©å¹²åœ°æ”¯ï¼‰

### 6. â˜¯ï¸ æ˜“ç»å åœ

**å‚æ•°**:
```json
{
  "question": "æœ€è¿‘åº”è¯¥æ¢å·¥ä½œå—ï¼Ÿ",
  "method": "manual",     // ä½¿ç”¨ "manual" è€Œä¸æ˜¯ "three_coins"
  "numbers": [6,7,8,9,6,7], // 6 ä¸ªæ•°å­—ï¼ˆ6-9ï¼‰
  "language": "zh-CN"
}
```

**å åœæ–¹æ³•**:
- `manual`: æ‰‹åŠ¨è¾“å…¥ 6 ä¸ªæ•°å­—ï¼ˆ6-9ï¼‰
- å…¶ä»–æ–¹æ³•å¯èƒ½éœ€è¦é¢å¤–å®ç°

---

## ğŸ”§ æœåŠ¡çŠ¶æ€

### æ£€æŸ¥æœåŠ¡
```powershell
# æ£€æŸ¥ API æœåŠ¡å™¨ï¼ˆ3000 ç«¯å£ï¼‰
Get-NetTCPConnection -LocalPort 3000 -ErrorAction SilentlyContinue

# æ£€æŸ¥ Web æœåŠ¡å™¨ï¼ˆ8080 ç«¯å£ï¼‰
Get-NetTCPConnection -LocalPort 8080 -ErrorAction SilentlyContinue

# å¥åº·æ£€æŸ¥
curl http://localhost:3000/health
```

### å¯åŠ¨æœåŠ¡
```powershell
# API æœåŠ¡å™¨
cd divination-mcp-server
node api-server.js

# Web æœåŠ¡å™¨ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
node web-server.js
```

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **æµ‹è¯•è„šæœ¬**: 
  - `test-divinations.ps1` - PowerShell æµ‹è¯•è„šæœ¬
  - `test-dream-variations.js` - æ¢¦å¢ƒå¤šæ ·æ€§æµ‹è¯•
  
- **ç½‘é¡µç•Œé¢**:
  - `test-interactive.html` - äº¤äº’å¼æµ‹è¯•é¡µé¢
  - `dream-test-report.html` - æ¢¦å¢ƒæµ‹è¯•æŠ¥å‘Š
  
- **æœåŠ¡å™¨**:
  - `api-server.js` - HTTP API æœåŠ¡å™¨
  - `web-server.js` - é™æ€æ–‡ä»¶æœåŠ¡å™¨
  
- **æ ¸å¿ƒä»£ç **:
  - `src/services/dream.ts` - æ¢¦å¢ƒè§£ææœåŠ¡
  - `src/index.ts` - MCP æœåŠ¡å™¨ä¸»æ–‡ä»¶

---

## ğŸ¯ æµ‹è¯•ç»Ÿè®¡

- **æµ‹è¯•æ—¶é—´**: 2025-10-07
- **æµ‹è¯•ç”¨ä¾‹**: 7 ä¸ª
- **æˆåŠŸ**: 7 ä¸ª âœ…
- **å¤±è´¥**: 0 ä¸ª
- **æˆåŠŸç‡**: 100%

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æ¨èå·¥ä½œæµ

1. **æ‰“å¼€ç½‘é¡µç•Œé¢**
   ```
   http://localhost:8080/test-interactive.html
   ```

2. **é€‰æ‹©å åœç³»ç»Ÿ**
   - ç‚¹å‡»å¯¹åº”çš„æ ‡ç­¾é¡µ

3. **å¡«å……ç¤ºä¾‹æ•°æ®**
   - ç‚¹å‡»"å¡«å……ç¤ºä¾‹"æŒ‰é’®

4. **ä¿®æ”¹å‚æ•°**
   - æ ¹æ®éœ€è¦ä¿®æ”¹è¾“å…¥å€¼

5. **å¼€å§‹å åœ**
   - ç‚¹å‡»å¯¹åº”çš„å åœæŒ‰é’®

6. **æŸ¥çœ‹ç»“æœ**
   - ç»“æœä¼šæ˜¾ç¤ºåœ¨å³ä¾§é¢æ¿

### å¼€å‘è°ƒè¯•

1. **æŸ¥çœ‹ API æ—¥å¿—**
   - API æœåŠ¡å™¨ç»ˆç«¯ä¼šæ˜¾ç¤ºæ¯ä¸ªè¯·æ±‚

2. **æµ‹è¯•å•ä¸ªåŠŸèƒ½**
   ```powershell
   # ä½¿ç”¨ curl æˆ– Invoke-RestMethod æµ‹è¯•
   Invoke-RestMethod -Uri "http://localhost:3000/api/dream" -Method Post -Body '{"dream_description":"æµ‹è¯•"}' -ContentType "application/json"
   ```

3. **è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•**
   ```powershell
   powershell -ExecutionPolicy Bypass -File test-divinations.ps1
   ```

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. **æ•°å­—å‘½ç†æœªå®ç°**
   - å·¥å…· `numerology_reading` å°šæœªæ·»åŠ åˆ° MCP æœåŠ¡å™¨
   - éœ€è¦åœ¨ `src/index.ts` ä¸­å®ç°

2. **æ˜“ç»å åœæ–¹æ³•é™åˆ¶**
   - ç›®å‰åªæ”¯æŒ `manual` æ–¹æ³•
   - `three_coins` ç­‰æ–¹æ³•éœ€è¦é¢å¤–å®ç°

3. **ç´«å¾®/å…«å­—éœ€è¦æ—¥æœŸç±»å‹**
   - å¿…é¡»æ˜ç¡®æŒ‡å®š `solar_date` æˆ– `lunar_date`
   - å»ºè®®åœ¨å‰ç«¯é»˜è®¤è®¾ç½®ä¸º `solar_date: true`

---

## âœ¨ ä¼˜ç‚¹æ€»ç»“

âœ… **ç¨³å®šæ€§**: æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ  
âœ… **å®Œæ•´æ€§**: 6 ä¸ªä¸»è¦å åœç³»ç»Ÿå…¨éƒ¨å¯ç”¨  
âœ… **æ˜“ç”¨æ€§**: æä¾›ç½‘é¡µç•Œé¢å’Œ API ä¸¤ç§æ–¹å¼  
âœ… **å‡†ç¡®æ€§**: æ¢¦å¢ƒè§£æã€ç¬¦å·è¯†åˆ«ç­‰åŠŸèƒ½å‡†ç¡®å¯é   
âœ… **å¯æµ‹è¯•æ€§**: æä¾›è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬  

---

**æµ‹è¯•æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-07 16:10  
**æœåŠ¡çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ  
**å»ºè®®**: å¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰å åœåŠŸèƒ½ï¼
